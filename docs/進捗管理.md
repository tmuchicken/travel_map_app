# 要件定義ベース タスク進捗管理表 (v6)

## 1. はじめに
本ドキュメントは、「旅行経路アニメーション生成Webアプリ」開発プロジェクトにおける全タスクを要件定義書に基づいて一覧化し、各タスクの進捗状況、担当、課題、備考を明確にすることを目的とします。このドキュメントは、PJの進捗に合わせて随時更新されます。

## 2. 凡例
-   ✅ 完了: タスクが完了している状態。
-   🚀 進行中: タスクが現在進行中である状態。
-   ⚠️ 未着手: タスクがまだ開始されていない状態。
-   🔶 部分完了/課題あり: タスクの一部は完了しているが、課題や確認事項が残っている状態。
-   N/A: 該当なし。

## 3. タスク一覧と進捗状況 (2025年5月12日現在)

| No. | 要件定義書項目                    | タスク内容                                                                       | 進捗 | 担当             | 課題・確認事項                                                                                                                                                                   | 備考                                                                                                                                                               |
|-----|-----------------------------------|--------------------------------------------------------------------------------|------|------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1   | 3.1 地図表示                      | 1.1 OpenStreetMap を利用したインタラクティブマップの表示                                    | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | Leaflet.js を使用。Map.tsx で実装済み。                                                                                                                            |
|     |                                   | 1.2 日本語ラベル対応                                                               | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | OpenStreetMap および Leaflet が標準で対応。                                                                                                                      |
| 2   | 3.2 経路入力と移動手段設定        | 2.1 UI統合: 経路入力と各区間の移動手段選択を同一のインターフェースで行う                             | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | ControlPanel.tsx にて実現。                                                                                                                                      |
|     |                                   | 2.2 出発地・目的地の入力 (住所または地名)                                                      | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | ControlPanel.tsx で実装済み。                                                                                                                                      |
|     |                                   | 2.3 中継地点の追加 (複数地点を経由可能)                                                        | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | ControlPanel.tsx で実装済み。                                                                                                                                      |
|     |                                   | 2.4 移動手段の選択（アイコン付き）: バス,飛行機,電車,車,船,徒歩                                      | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | ControlPanel.tsx と Map.tsx で実装済み。                                                                                                                             |
|     |                                   | 2.5 入力補完（サジェスト）機能                                                               | ⚠️   | Gemini（PM兼任） | Nominatim API等を利用した実装方法の調査・選定、UI/UX設計が必要。同名地名が複数ヒットする可能性あり。                                                                                                    | ジオコーディング自体は実装済み。Nominatimの countrycodes=jp パラメータを削除し、全世界を検索対象に変更済み。入力補完機能自体は未実装。                                                     |
|     |                                   | 2.6 拡張 地図クリックでの地点入力（ピン刺し）                                                    | 🚀   | Gemini（PM兼任） | 各地点入力欄に対応する「地図から選択」ボタンの実装、地図クリックイベントの処理、逆ジオコーディングの実装、ピン刺しモードUIの検討。                                                                                          | 新しい機能要望。ControlPanel, page, Map コンポーネントの修正が必要。現在page.tsxとMap.tsxの修正コードを提案中。                                                             |
| 3   | 3.4 アニメーション再生              | 3.1 UI配置: アニメーション操作パネルを地図表示エリアの近くに配置                                       | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | AnimationControls.tsx を地図下部に配置。                                                                                                                          |
|     |                                   | 3.2 出発地と目的地にピン刺しをして、地名を表示                                                       | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | Map.tsx にてマーカーとポップアップで表示。                                                                                                                            |
|     |                                   | 3.3 経路上をアイコンがアニメーションで移動                                                         | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | Map.tsx で実装済み。                                                                                                                                             |
|     |                                   | 3.4 陸上交通（バス、車、徒歩など）は、実際の道路網に基づいた経路でアニメーション表示                               | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | 徒歩もOSRMを利用した道路網ベースの経路描画に変更済み。                                                                                                                 |
|     |                                   | 3.5 飛行機や船など、直線/曲線でアニメーション表示                                                    | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | 飛行機は直線描画。船はシンプルな曲線描画に変更済み。                                                                                                                   |
|     |                                   | 3.6 アニメーション速度の調整（スライダー形式）                                                       | 🔶   | Gemini（PM兼任） | スライダーではなく、区間移動時間を秒数で直接入力する形式で実装済み。要件との整合性確認（スライダー形式が必須か）。スライダーへの変更を検討。                                                                                     | AnimationControls.tsx と page.tsx で segmentDurationSeconds を用いて実装済み。                                                                                 |
|     |                                   | 3.7 地図の自動スクロール・ズームイン                                                              | 🔶   | Gemini（PM兼任） | 自動スクロール（panTo）は実装済み。自動ズームは、全体の経路表示時のfitBoundsのみ。アニメーション中の動的なズーム調整は未実装。                                                                                        | Map.tsx で panTo は実装されているが、アニメーション中のズーム調整は未実装。                                                                                              |
| 4   | 3.5 出力機能                      | 4.1 再生中アニメーションの録画（動画ファイルとしてエクスポート、MP4、最大4K目標）                               | ⚠️   | Gemini（PM兼任） | MediaRecorder API の調査・実装。4K対応の技術検証、パフォーマンス検証、ブラウザ互換性確認が必要。                                                                                              | AnimationControls.tsx にボタンのみ配置。PreviewOutput.tsx はコメントアウトされているが、将来的なUIの検討として存在。                                                     |
|     |                                   | 4.2 画像としてスクリーンショット保存                                                              | ⚠️   | Gemini（PM兼任） | html2canvas 等のライブラリ調査・実装。                                                                                                                                       | AnimationControls.tsx にボタンのみ配置。                                                                                                                             |
|     |                                   | 4.3 SNS向けの共有機能（MP4、GIF形式）                                                            | ⚠️   | Gemini（PM兼任） | GIF生成方法の調査・実装（gif.js, ffmpeg.wasm等）。Web Share API等の簡易共有機能の検討。                                                                                             | AnimationControls.tsx にボタンのみ配置。                                                                                                                             |
| 5   | 3.6 ユーザーインターフェース        | 5.1 日本語UI（全項目）                                                                     | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | ほとんどのUI要素が日本語で記述済み。                                                                                                                               |
|     |                                   | 5.2 モバイル対応（レスポンシブデザイン）                                                             | ✅   | Gemini（PM兼任） | Tailwind CSSにより基本的なレスポンシブ対応済み。各画面サイズでの詳細な表示確認・調整は継続。                                                                                                   | globals.css と各コンポーネントのTailwindクラスで実装済み。                                                                                                           |
|     |                                   | 5.3 ダークモード切替機能                                                                   | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | Header.tsx で実装済み。                                                                                                                                          |
| 6   | 3.7 保存・読み込み機能            | 6.1 プロジェクトのローカルストレージへの一時保存と再編集                                                   | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | page.tsx で実装済み。アニメーション速度も保存対象。                                                                                                                   |
| 7   | 4. 非機能要件                     | 7.1 対応ブラウザ：Chrome、Safari、Edge、Firefox（最新バージョン）                                   | 🚀   | Gemini（PM兼任） | 現在Chromeを中心に開発。各フェーズ完了時および最終テスト時に他ブラウザでの動作検証を実施。                                                                                                   |                                                                                                                                                                    |
|     |                                   | 7.2 フロントエンド：React または Vue.js（SPA構成）                                                | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | React (Next.js) を採用。                                                                                                                                         |
|     |                                   | 7.3 地図API：Leaflet.js + OpenStreetMap                                                       | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | Map.tsx で実装済み。                                                                                                                                             |
|     |                                   | 7.4 経路検索・ジオコーディング: OSRM, Nominatim                                                 | ✅   | Gemini（PM兼任） | OSRMデモサーバーとNominatimの利用規約に関する注意喚起を実装済み。                                                                                                                  | Map.tsx と Header.tsx に警告表示機能あり。                                                                                                                         |
|     |                                   | 7.5 ホスティング：Vercel                                                                     | ⚠️   | Gemini（PM兼任） | デプロイフェーズで実施。                                                                                                                                                       |                                                                                                                                                                    |
|     |                                   | 7.6 APIキー秘匿化等（必要な場合）                                                                 | N/A  | Gemini（PM兼任） | 現状クライアントサイドで完結するAPIのみ利用のため該当なし。                                                                                                                            | 将来的にサーバーサイド処理を導入する場合は検討。                                                                                                                     |
| 8   | 5. 管理機能（将来的に検討）       | 8.1 テンプレート保存・公開機能                                                                 | ⚠️   | Gemini（PM兼任） | 将来検討事項。                                                                                                                                                             |                                                                                                                                                                    |
|     |                                   | 8.2 利用履歴管理                                                                       | ⚠️   | Gemini（PM兼任） | 将来検討事項。                                                                                                                                                             |                                                                                                                                                                    |
| 9   | 6. 制約事項への対応               | 9.1 Google Maps API使用時の課金制に注意                                                         | N/A  | Gemini（PM兼任） | OpenStreetMap利用のため、現時点では該当なし。                                                                                                                                 |                                                                                                                                                                    |
|     |                                   | 9.2 録画機能のブラウザベース制限、高画質録画の課題認識                                                   | 🚀   | Gemini（PM兼任） | 出力機能実装時に、MediaRecorder APIの制約を考慮し、ユーザーへの注意喚起表示などを検討・実装。                                                                                                  | Map.tsx のクリーンアップ関数で animationFrameIdRef のキャンセル処理実装済み。PreviewOutput.tsx に関連UIの検討が伺える。                                                    |
|     |                                   | 9.3 無料の経路検索APIやジオコーディングサービスの利用規約遵守                                                | 🚀   | Gemini（PM兼任） | Nominatim, OSRMデモサーバーの利用規約を遵守。ユーザーへの注意喚起は実装済み。リクエスト頻度制限等に抵触しないよう、継続的に監視・必要に応じて対策。                                                                        | Map.tsx と Header.tsx に警告表示機能あり。                                                                                                                         |
|     |                                   | 9.4 4K動画出力時のファイルサイズ等の課題認識                                                          | 🚀   | Gemini（PM兼任） | 出力機能実装時に、ファイルサイズ、処理時間、ユーザーのストレージ容量への影響を考慮し、適切な情報提供とオプション設定を検討・実装。                                                                                     | PreviewOutput.tsx に関連UIの検討が伺える。                                                                                                                         |