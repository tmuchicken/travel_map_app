# 要件定義ベース タスク進捗管理表 (v9)

## 1. はじめに
本ドキュメントは、「旅行経路アニメーション生成Webアプリ」開発プロジェクトにおける全タスクを要件定義書に基づいて一覧化し、各タスクの進捗状況、担当、課題、備考を明確にすることを目的とします。このドキュメントは、PJの進捗に合わせて随時更新されます。

## 2. 凡例
-   ✅ 完了: タスクが完了している状態。
-   🚀 進行中: タスクが現在進行中である状態。
-   ⚠️ 未着手: タスクがまだ開始されていない状態。
-   🔶 部分完了/課題あり: タスクの一部は完了しているが、課題や確認事項が残っている状態。
-   N/A: 該当なし。
-   ❌ 中断/中止: タスクの開発を中断または中止した状態。

## 3. タスク一覧と進捗状況 (2025年5月13日現在)

| No. | 要件定義書項目                    | タスク内容                                                                       | 進捗 | 担当             | 課題・確認事項                                                                                                                                                                   | 備考                                                                                                                                                               |
|-----|-----------------------------------|--------------------------------------------------------------------------------|------|------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1   | 3.1 地図表示                      | 1.1 OpenStreetMap を利用したインタラクティブマップの表示                                    | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | Leaflet.js を使用。Map.tsx で実装済み。                                                                                                                            |
|     |                                   | 1.2 日本語ラベル対応                                                               | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | OpenStreetMap および Leaflet が標準で対応。                                                                                                                      |
|     |                                   | 1.3 ユーザーによる地図スタイルの選択機能                                                       | ✅   | Gemini（PM兼任） | StamenタイルはAPIキー問題でデフォルトリストからコメントアウト済み。                                                                                                                       | Headerに選択UIを配置。page.tsxで状態管理。Map.tsxで描画切替。CartoDBタイル等を利用。                                                                                    |
|     |                                   | **1.4 [新規] 地点マーカーの地名表示改善** | ⚠️   | Gemini（PM兼任） | ユーザー編集後の地名をポップアップに表示。                                                                                                                                             |                                                                                                                                                                    |
|     |                                   | **1.5 [検討中] 思い出の写真サムネイル表示（セッション限定）** | ⚠️   | Gemini（PM兼任） | 実装する場合、ポップアップ内かマーカー近辺か。表示トリガー（クリック/マウスオーバー）。                                                                                                            |                                                                                                                                                                    |
| 2   | 3.2 経路入力と移動手段設定        | 2.1 UI統合: 経路入力と各区間の移動手段選択を同一のインターフェースで行う                             | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | ControlPanel.tsx にて実現。                                                                                                                                      |
|     |                                   | 2.2 出発地・目的地の入力 (住所または地名)                                                      | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | ControlPanel.tsx で実装済み。                                                                                                                                      |
|     |                                   | **2.2.1 [新規] ユーザーによる地名の編集機能** | ⚠️   | Gemini（PM兼任） | ControlPanelの入力フィールドで編集可能にし、locations stateに反映。                                                                                                                   | 検索結果や逆ジオコーディング結果を初期値とし、ユーザーが上書き可能にする。                                                                                                    |
|     |                                   | 2.3 中継地点の追加 (複数地点を経由可能)                                                        | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | ControlPanel.tsx で実装済み。地名編集も同様に適用。                                                                                                                     |
|     |                                   | 2.4 移動手段の選択（アイコン付き）: バス,飛行機,電車,車,船,徒歩                                      | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | ControlPanel.tsx と Map.tsx で実装済み。                                                                                                                             |
|     |                                   | 2.5 入力補完（サジェスト）機能                                                               | ⚠️   | Gemini（PM兼任） | Nominatim API等を利用した実装方法の調査・選定、UI/UX設計が必要。                                                                                                                   | ジオコーディング自体は実装済み。入力補完機能自体は未実装。                                                                                                                  |
|     |                                   | 2.6 拡張 地図クリックでの地点入力（ピン刺し）                                                    | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | ControlPanel, page, Map コンポーネントにて実装済み。地名編集も適用。                                                                                                |
|     |                                   | **2.7 [検討中] 思い出の写真の関連付け機能（セッション限定）** | ⚠️   | Gemini（PM兼任） | ファイル選択UI、Data URL変換、stateでの保持、削除・変更機能。ユーザーへの注釈表示。                                                                                                    | ローカルストレージへの保存は行わない。                                                                                                                                 |
| 3   | 3.4 アニメーション再生              | 3.1 UI配置: アニメーション操作パネルを地図表示エリアの近くに配置                                       | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | AnimationControls.tsx を地図下部に配置。                                                                                                                          |
|     |                                   | 3.2 出発地と目的地にピン刺しをして、ユーザー設定の地名を表示                                           | ⚠️   | Gemini（PM兼任） | 1.4および2.2.1の地名編集機能と連携。                                                                                                                                          |                                                                                                                                                                    |
|     |                                   | 3.3 経路上をアイコンがアニメーションで移動                                                         | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | Map.tsx で実装済み。                                                                                                                                             |
|     |                                   | 3.4 陸上交通（バス、車、徒歩など）は、実際の道路網に基づいた経路でアニメーション表示                               | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | 徒歩もOSRMを利用した道路網ベースの経路描画。                                                                                                                    |
|     |                                   | 3.5 飛行機や船など、直線/曲線でアニメーション表示                                                    | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | 飛行機は直線描画。船はシンプルな曲線描画。                                                                                                                      |
|     |                                   | 3.6 アニメーション速度の調整                                                               | ✅   | Gemini（PM兼任） | 区間移動時間を秒数で直接入力する形式で実装済み。                                                                                                                                      | AnimationControls.tsx と page.tsx で segmentDurationSeconds を用いて実装済み。                                                                                 |
|     |                                   | 3.7 地図の自動スクロール・ズームイン                                                              | 🔶   | Gemini（PM兼任） | 自動スクロール（panTo）は実装済み。自動ズームは、全体の経路表示時のfitBoundsのみ。アニメーション中の動的なズーム調整は未実装。                                                                                        | Map.tsx で panTo は実装されているが、アニメーション中のズーム調整は未実装。                                                                                              |
|     |                                   | 3.8 [新規] アニメーション品質の向上検討・実装                                                    | ⚠️   | Gemini（PM兼任） | 具体的な改善点の洗い出し (例: イージング、アイコンの向き、視覚効果など)。パフォーマンスとの両立。                                                                                              | ユーザーキャプチャを前提とした品質向上を目指す。                                                                                                                           |
| 4   | 3.5 出力機能                      | 4.1 アプリケーション内からの直接的な映像ファイル出力機能は提供しない                                       | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | 録画機能は削除済み。ユーザー自身でのキャプチャを想定。                                                                                                                      |
|     |                                   | 4.2 画像としてスクリーンショット保存 (簡易版)                                                  | ⚠️   | Gemini（PM兼任） | 実装有無を再検討。                                                                                                                                                         | 優先度は高くない。                                                                                                                                                  |
| 5   | 3.6 ユーザーインターフェース        | 5.1 日本語UI（全項目）                                                                     | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | ほとんどのUI要素が日本語で記述済み。                                                                                                                               |
|     |                                   | 5.2 モバイル対応（レスポンシブデザイン）                                                             | ✅   | Gemini（PM兼任） | Tailwind CSSにより基本的なレスポンシブ対応済み。                                                                                                                              | globals.css と各コンポーネントのTailwindクラスで実装済み。                                                                                                           |
|     |                                   | 5.3 ダークモード切替機能                                                                   | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | Header.tsx で実装済み。                                                                                                                                          |
| 6   | 3.7 保存・読み込み機能            | 6.1 **[内容変更]** プロジェクトの限定的なローカルストレージへの保存と再編集                                | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | page.tsx で実装済み。地点情報、アニメーション速度、選択地図スタイルIDを保存。**写真データは保存対象外。** |
| 7   | 4. 非機能要件                     | 7.1 対応ブラウザ：Chrome、Safari、Edge、Firefox（最新バージョン）                                   | 🚀   | Gemini（PM兼任） | 現在Chromeを中心に開発。他ブラウザでの動作検証は継続。                                                                                                                            |                                                                                                                                                                    |
|     |                                   | 7.2 フロントエンド：React (Next.js)                                                       | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | React (Next.js) を採用。                                                                                                                                         |
|     |                                   | 7.3 地図API：Leaflet.js + OpenStreetMap およびその他タイルプロバイダー                                  | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | Map.tsx で実装済み。CartoDB等も利用。                                                                                                                            |
|     |                                   | 7.4 経路検索・ジオコーディング: OSRM, Nominatim                                                 | ✅   | Gemini（PM兼任） | OSRMデモサーバーとNominatimの利用規約に関する注意喚起を実装済み。                                                                                                                  | Map.tsx と Header.tsx に警告表示機能あり。                                                                                                                         |
|     |                                   | 7.5 ホスティング：Vercel                                                                     | ⚠️   | Gemini（PM兼任） | デプロイフェーズで実施。                                                                                                                                                       |                                                                                                                                                                    |
|     |                                   | 7.6 APIキー秘匿化等（必要な場合）                                                                 | N/A  | Gemini（PM兼任） | 現状クライアントサイドで完結するAPIのみ利用のため該当なし。                                                                                                                            |                                                                                                                                                                    |
| 8   | 5. 管理機能（将来的に検討）       | 8.1 テンプレート保存・公開機能                                                                 | ⚠️   | Gemini（PM兼任） | 将来検討事項。                                                                                                                                                             |                                                                                                                                                                    |
|     |                                   | 8.2 利用履歴管理                                                                       | ⚠️   | Gemini（PM兼任） | 将来検討事項。                                                                                                                                                             |                                                                                                                                                                    |
| 9   | 6. 制約事項への対応               | 9.1 Google Maps API使用時の課金制に注意                                                         | N/A  | Gemini（PM兼任） | OpenStreetMap利用のため、該当なし。                                                                                                                                    |                                                                                                                                                                    |
|     |                                   | 9.2 **[削除]** 録画機能に関する制約                                                               | ✅   | Gemini（PM兼任） |                                                                                                                                                                                | 録画機能削除のため、該当なし。                                                                                                                                        |
|     |                                   | 9.3 無料の経路検索APIやジオコーディングサービス、地図タイルサービスの利用規約遵守                               | ✅   | Gemini（PM兼任） | Nominatim, OSRMデモサーバーの利用規約を遵守。ユーザーへの注意喚起は実装済み。一部タイルサービス(Stamen等)は利用状況が変化する可能性あり。                                                                  | Map.tsx と Header.tsx に警告表示機能あり。Stamenタイルは現状コメントアウト。                                                                                               |
|     |                                   | 9.4 **[変更]** ローカルストレージの利用に関する制約                                                   | ✅   | Gemini（PM兼任） | 写真データは保存対象外としたため容量圧迫の懸念は低減。ただし地点数が多い場合のテキストデータの総量には依然留意。                                                                                     |                                                                                                                                                                    |